<Window x:Class="GitHubGrid.Views.ContributionGridWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        SizeToContent="WidthAndHeight"
        Deactivated="Window_Deactivated">

    <Border Background="{DynamicResource BackgroundBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="12"
            Padding="20,16"
            Effect="{StaticResource PopupShadow}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header: contribution count + refresh -->
            <Grid Grid.Row="0" Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding StatusText}"
                           Foreground="{DynamicResource TextBrush}"
                           FontSize="14"
                           FontFamily="Segoe UI"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"/>

                <Button Grid.Column="1"
                        Content="&#x21BB; Refresh"
                        Command="{Binding RefreshCommand}"
                        Style="{StaticResource RefreshButton}"/>
            </Grid>

            <!-- Month labels -->
            <Canvas x:Name="MonthLabelsCanvas"
                    Grid.Row="1"
                    Height="16"
                    Margin="30,0,0,2"/>

            <!-- Day labels + contribution grid -->
            <StackPanel Grid.Row="2" Orientation="Horizontal">
                <Canvas x:Name="DayLabelsCanvas" Width="30"/>
                <Canvas x:Name="ContributionCanvas"/>
            </StackPanel>

            <!-- Footer: Less/More legend -->
            <StackPanel Grid.Row="3"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,10,0,0">
                <TextBlock Text="Less"
                           FontSize="10"
                           FontFamily="Segoe UI"
                           Foreground="{DynamicResource SecondaryTextBrush}"
                           VerticalAlignment="Center"
                           Margin="0,0,4,0"/>
                <Canvas x:Name="LegendCanvas" Width="74" Height="13"/>
                <TextBlock Text="More"
                           FontSize="10"
                           FontFamily="Segoe UI"
                           Foreground="{DynamicResource SecondaryTextBrush}"
                           VerticalAlignment="Center"
                           Margin="4,0,0,0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
